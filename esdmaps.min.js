!function(a,b){"undefined"!=typeof exports?b(a,exports,null):a.ESDMaps=b(a,a.ESDMaps||{},a.L)}(this,function(a,b,c){function d(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}function e(a){return d(Array.prototype.slice.call(arguments,1),function(b){for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a}function f(a,b){var c={};return d(b,function(b){a[b]&&(c[b]=a[b])}),c}function g(a,b,c){var d=new XMLHttpRequest;d.open("GET",a,!0),d.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<400?b(JSON.parse(this.responseText)):c&&c())},d.send(),d=null}function h(a,b){var c={};return d(b,function(b){var d="data-"+b;a.hasAttribute(d)&&(c[b]=a.getAttribute(d))}),c}function i(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function j(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")}function k(a,b){var c;"undefined"==typeof b.altPopup?(c=m(),container=a.getContainer(),container.parentNode.insertBefore(c,container.nextSibling)):c="string"==typeof b.altPopup?document.querySelector("#"+b.altPopup):b.altPopup,c&&(i(c,o.altPopupClass),a.on("popupopen",function(a){c.innerHTML=a.popup.getContent(),i(c,o.altPopupOpenClass)}),a.on("popupclose",function(){c.innerHTML="",j(c,o.altPopupOpenClass)}))}function l(a,b,d){return g(b,function(b){c.geoJson(b,{pointToLayer:c.mapbox.marker.style,style:function(a){return a.properties},onEachFeature:function(a,b){"string"==typeof d.popupTemplate?b.bindPopup(c.mapbox.template(d.popupTemplate,a.properties)):"function"==typeof d.popupTemplate&&b.bindPopup(d.popupTemplate(a.properties)),b.on("popupopen",function(a){var b=a.target;b.feature.properties["old-color"]=b.feature.properties["marker-color"],b.feature.properties["marker-color"]=o.selectedMarkerColor,b.setIcon(c.mapbox.marker.icon(b.feature.properties))}),b.on("popupclose",function(a){var b=a.target;b.feature.properties["marker-color"]=b.feature.properties["old-color"],b.setIcon(c.mapbox.marker.icon(b.feature.properties))})}}).addTo(a)}),a}function m(){var a=document.createElement("div");return a.setAttribute("id","esdmaps-alt-popup"),a}function n(a){var c=h(a,["preset","alt-popup","points-url"]);c.preset&&b.map(a,c.preset,{altPopup:c["alt-popup"],pointsUrl:c["points-url"]})}b.VERSION="0.0.1";var o=b.settings={altPopupClass:"esdmaps-alt-popup",altPopupOpenClass:"esdmaps-alt-popup-open",baseUrl:"",selectedMarkerColor:"#124472"};b._presets={};var p=b.registerPreset=function(a,c){b._presets[a]=c},q=b.getPreset=function(a){return b._presets[a]};b.map=function(a,b,d){d=d||{};var g,h=q(b);return h?(d=e(d,f(h,["zoom","center","popupTemplate","pointsUrl"])),g=c.mapbox.map(a,h.mapboxId,d),k(g,d),d.pointsUrl&&l(g,d.pointsUrl,d),g):c.mapbox.map(a,b,d)};var r=b.detectMaps=function(){d(document.querySelectorAll(".esdmaps-map"),n)};return p("recommended-schools-k-8-2014",{mapboxId:"esd.ExcellentSchoolsDetroit",center:c.latLng(42.3484,-83.058),zoom:14,pointsUrl:o.baseUrl+"/data/recommended-k-8-schools-2014-spring.json",popupTemplate:"<div><h2>{{schoolname}}</h2><p>{{address}}<br>{{city}}, {{state}} {{zip}}</p><a href='{{scorecard-url}}' target='_blank'>View Scorecard Profile</a></div>"}),r(),b});
//# sourceMappingURL=esdmaps.min.map